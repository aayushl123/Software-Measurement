<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>BinaryCodecTest.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">commons_codec$Jacoco.exec</a> &gt; <a href="index.source.html" class="el_package">org.apache.commons.codec.binary</a> &gt; <span class="el_source">BinaryCodecTest.java</span></div><h1>BinaryCodecTest.java</h1><pre class="source lang-java linenums">/*
 * Licensed to the Apache Software Foundation (ASF) under one or more
 * contributor license agreements.  See the NOTICE file distributed with
 * this work for additional information regarding copyright ownership.
 * The ASF licenses this file to You under the Apache License, Version 2.0
 * (the &quot;License&quot;); you may not use this file except in compliance with
 * the License.  You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package org.apache.commons.codec.binary;

import static org.junit.Assert.assertEquals;
import static org.junit.Assert.fail;

import org.apache.commons.codec.Charsets;
import org.apache.commons.codec.DecoderException;
import org.apache.commons.codec.EncoderException;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

/**
 * TestCase for BinaryCodec class.
 *
 * @version $Id$
 */
<span class="fc" id="L35">public class BinaryCodecTest {</span>
    /** mask with bit zero based index 0 raised */
    private static final int BIT_0 = 0x01;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_1 = 0x02;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_2 = 0x04;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_3 = 0x08;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_4 = 0x10;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_5 = 0x20;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_6 = 0x40;

    /** mask with bit zero based index 0 raised */
    private static final int BIT_7 = 0x80;

    /** an instance of the binary codec */
<span class="fc" id="L61">    BinaryCodec instance = null;</span>

    @Before
    public void setUp() throws Exception {
<span class="fc" id="L65">        this.instance = new BinaryCodec();</span>
<span class="fc" id="L66">    }</span>

    @After
    public void tearDown() throws Exception {
<span class="fc" id="L70">        this.instance = null;</span>
<span class="fc" id="L71">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test decode(Object)
    //
    // ------------------------------------------------------------------------
    /**
     * Tests for Object decode(Object)
     */
    @Test
    public void testDecodeObjectException() {
        try {
<span class="nc" id="L84">            this.instance.decode(new Object());</span>
<span class="fc" id="L85">        } catch (final DecoderException e) {</span>
            // all is well.
<span class="fc" id="L87">            return;</span>
<span class="nc" id="L88">        }</span>
<span class="nc" id="L89">        fail(&quot;Expected DecoderException&quot;);</span>
<span class="nc" id="L90">    }</span>

    /**
     * Tests for Object decode(Object)
     */
    @Test
    public void testDecodeObject() throws Exception {
        byte[] bits;
        // With a single raw binary
<span class="fc" id="L99">        bits = new byte[1];</span>
<span class="fc" id="L100">        assertDecodeObject(bits, &quot;00000000&quot;);</span>
<span class="fc" id="L101">        bits = new byte[1];</span>
<span class="fc" id="L102">        bits[0] = BIT_0;</span>
<span class="fc" id="L103">        assertDecodeObject(bits, &quot;00000001&quot;);</span>
<span class="fc" id="L104">        bits = new byte[1];</span>
<span class="fc" id="L105">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L106">        assertDecodeObject(bits, &quot;00000011&quot;);</span>
<span class="fc" id="L107">        bits = new byte[1];</span>
<span class="fc" id="L108">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L109">        assertDecodeObject(bits, &quot;00000111&quot;);</span>
<span class="fc" id="L110">        bits = new byte[1];</span>
<span class="fc" id="L111">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L112">        assertDecodeObject(bits, &quot;00001111&quot;);</span>
<span class="fc" id="L113">        bits = new byte[1];</span>
<span class="fc" id="L114">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L115">        assertDecodeObject(bits, &quot;00011111&quot;);</span>
<span class="fc" id="L116">        bits = new byte[1];</span>
<span class="fc" id="L117">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L118">        assertDecodeObject(bits, &quot;00111111&quot;);</span>
<span class="fc" id="L119">        bits = new byte[1];</span>
<span class="fc" id="L120">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L121">        assertDecodeObject(bits, &quot;01111111&quot;);</span>
<span class="fc" id="L122">        bits = new byte[1];</span>
<span class="fc" id="L123">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L124">        assertDecodeObject(bits, &quot;11111111&quot;);</span>
        // With a two raw binaries
<span class="fc" id="L126">        bits = new byte[2];</span>
<span class="fc" id="L127">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L128">        assertDecodeObject(bits, &quot;0000000011111111&quot;);</span>
<span class="fc" id="L129">        bits = new byte[2];</span>
<span class="fc" id="L130">        bits[1] = BIT_0;</span>
<span class="fc" id="L131">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L132">        assertDecodeObject(bits, &quot;0000000111111111&quot;);</span>
<span class="fc" id="L133">        bits = new byte[2];</span>
<span class="fc" id="L134">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L135">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L136">        assertDecodeObject(bits, &quot;0000001111111111&quot;);</span>
<span class="fc" id="L137">        bits = new byte[2];</span>
<span class="fc" id="L138">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L139">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L140">        assertDecodeObject(bits, &quot;0000011111111111&quot;);</span>
<span class="fc" id="L141">        bits = new byte[2];</span>
<span class="fc" id="L142">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L143">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L144">        assertDecodeObject(bits, &quot;0000111111111111&quot;);</span>
<span class="fc" id="L145">        bits = new byte[2];</span>
<span class="fc" id="L146">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L147">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L148">        assertDecodeObject(bits, &quot;0001111111111111&quot;);</span>
<span class="fc" id="L149">        bits = new byte[2];</span>
<span class="fc" id="L150">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L151">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L152">        assertDecodeObject(bits, &quot;0011111111111111&quot;);</span>
<span class="fc" id="L153">        bits = new byte[2];</span>
<span class="fc" id="L154">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L155">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L156">        assertDecodeObject(bits, &quot;0111111111111111&quot;);</span>
<span class="fc" id="L157">        bits = new byte[2];</span>
<span class="fc" id="L158">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L159">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L160">        assertDecodeObject(bits, &quot;1111111111111111&quot;);</span>
<span class="fc" id="L161">        assertDecodeObject(new byte[0], null);</span>
<span class="fc" id="L162">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test decode(byte[])
    //
    // ------------------------------------------------------------------------
    /**
     * Utility used to assert the encoded and decoded values.
     *
     * @param bits
     *            the pre-encoded data
     * @param encodeMe
     *            data to encode and compare
     */
    void assertDecodeObject(final byte[] bits, final String encodeMe) throws DecoderException {
        byte[] decoded;
<span class="fc" id="L179">        decoded = (byte[]) instance.decode(encodeMe);</span>
<span class="fc" id="L180">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc bfc" id="L181" title="All 2 branches covered.">        if (encodeMe == null) {</span>
<span class="fc" id="L182">            decoded = instance.decode((byte[]) null);</span>
        } else {
<span class="fc" id="L184">            decoded = (byte[]) instance.decode((Object) encodeMe.getBytes(Charsets.UTF_8));</span>
        }
<span class="fc" id="L186">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc bfc" id="L187" title="All 2 branches covered.">        if (encodeMe == null) {</span>
<span class="fc" id="L188">            decoded = (byte[]) instance.decode((char[]) null);</span>
        } else {
<span class="fc" id="L190">            decoded = (byte[]) instance.decode(encodeMe.toCharArray());</span>
        }
<span class="fc" id="L192">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L193">    }</span>

    /*
     * Tests for byte[] decode(byte[])
     */
    @Test
    public void testDecodeByteArray() {
        // With a single raw binary
<span class="fc" id="L201">        byte[] bits = new byte[1];</span>
<span class="fc" id="L202">        byte[] decoded = instance.decode(&quot;00000000&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L203">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L204">        bits = new byte[1];</span>
<span class="fc" id="L205">        bits[0] = BIT_0;</span>
<span class="fc" id="L206">        decoded = instance.decode(&quot;00000001&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L207">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L208">        bits = new byte[1];</span>
<span class="fc" id="L209">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L210">        decoded = instance.decode(&quot;00000011&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L211">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L212">        bits = new byte[1];</span>
<span class="fc" id="L213">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L214">        decoded = instance.decode(&quot;00000111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L215">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L216">        bits = new byte[1];</span>
<span class="fc" id="L217">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L218">        decoded = instance.decode(&quot;00001111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L219">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L220">        bits = new byte[1];</span>
<span class="fc" id="L221">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L222">        decoded = instance.decode(&quot;00011111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L223">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L224">        bits = new byte[1];</span>
<span class="fc" id="L225">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L226">        decoded = instance.decode(&quot;00111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L227">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L228">        bits = new byte[1];</span>
<span class="fc" id="L229">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L230">        decoded = instance.decode(&quot;01111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L231">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L232">        bits = new byte[1];</span>
<span class="fc" id="L233">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L234">        decoded = instance.decode(&quot;11111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L235">        assertEquals(new String(bits), new String(decoded));</span>
        // With a two raw binaries
<span class="fc" id="L237">        bits = new byte[2];</span>
<span class="fc" id="L238">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L239">        decoded = instance.decode(&quot;0000000011111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L240">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L241">        bits = new byte[2];</span>
<span class="fc" id="L242">        bits[1] = BIT_0;</span>
<span class="fc" id="L243">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L244">        decoded = instance.decode(&quot;0000000111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L245">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L246">        bits = new byte[2];</span>
<span class="fc" id="L247">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L248">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L249">        decoded = instance.decode(&quot;0000001111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L250">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L251">        bits = new byte[2];</span>
<span class="fc" id="L252">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L253">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L254">        decoded = instance.decode(&quot;0000011111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L255">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L256">        bits = new byte[2];</span>
<span class="fc" id="L257">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L258">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L259">        decoded = instance.decode(&quot;0000111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L260">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L261">        bits = new byte[2];</span>
<span class="fc" id="L262">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L263">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L264">        decoded = instance.decode(&quot;0001111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L265">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L266">        bits = new byte[2];</span>
<span class="fc" id="L267">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L268">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L269">        decoded = instance.decode(&quot;0011111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L270">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L271">        bits = new byte[2];</span>
<span class="fc" id="L272">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L273">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L274">        decoded = instance.decode(&quot;0111111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L275">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L276">        bits = new byte[2];</span>
<span class="fc" id="L277">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L278">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L279">        decoded = instance.decode(&quot;1111111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L280">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L281">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test toByteArray(String)
    //
    // ------------------------------------------------------------------------
    /*
     * Tests for byte[] toByteArray(String)
     */
    @Test
    public void testToByteArrayFromString() {
        // With a single raw binary
<span class="fc" id="L294">        byte[] bits = new byte[1];</span>
<span class="fc" id="L295">        byte[] decoded = instance.toByteArray(&quot;00000000&quot;);</span>
<span class="fc" id="L296">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L297">        bits = new byte[1];</span>
<span class="fc" id="L298">        bits[0] = BIT_0;</span>
<span class="fc" id="L299">        decoded = instance.toByteArray(&quot;00000001&quot;);</span>
<span class="fc" id="L300">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L301">        bits = new byte[1];</span>
<span class="fc" id="L302">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L303">        decoded = instance.toByteArray(&quot;00000011&quot;);</span>
<span class="fc" id="L304">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L305">        bits = new byte[1];</span>
<span class="fc" id="L306">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L307">        decoded = instance.toByteArray(&quot;00000111&quot;);</span>
<span class="fc" id="L308">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L309">        bits = new byte[1];</span>
<span class="fc" id="L310">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L311">        decoded = instance.toByteArray(&quot;00001111&quot;);</span>
<span class="fc" id="L312">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L313">        bits = new byte[1];</span>
<span class="fc" id="L314">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L315">        decoded = instance.toByteArray(&quot;00011111&quot;);</span>
<span class="fc" id="L316">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L317">        bits = new byte[1];</span>
<span class="fc" id="L318">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L319">        decoded = instance.toByteArray(&quot;00111111&quot;);</span>
<span class="fc" id="L320">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L321">        bits = new byte[1];</span>
<span class="fc" id="L322">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L323">        decoded = instance.toByteArray(&quot;01111111&quot;);</span>
<span class="fc" id="L324">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L325">        bits = new byte[1];</span>
<span class="fc" id="L326">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L327">        decoded = instance.toByteArray(&quot;11111111&quot;);</span>
<span class="fc" id="L328">        assertEquals(new String(bits), new String(decoded));</span>
        // With a two raw binaries
<span class="fc" id="L330">        bits = new byte[2];</span>
<span class="fc" id="L331">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L332">        decoded = instance.toByteArray(&quot;0000000011111111&quot;);</span>
<span class="fc" id="L333">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L334">        bits = new byte[2];</span>
<span class="fc" id="L335">        bits[1] = BIT_0;</span>
<span class="fc" id="L336">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L337">        decoded = instance.toByteArray(&quot;0000000111111111&quot;);</span>
<span class="fc" id="L338">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L339">        bits = new byte[2];</span>
<span class="fc" id="L340">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L341">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L342">        decoded = instance.toByteArray(&quot;0000001111111111&quot;);</span>
<span class="fc" id="L343">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L344">        bits = new byte[2];</span>
<span class="fc" id="L345">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L346">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L347">        decoded = instance.toByteArray(&quot;0000011111111111&quot;);</span>
<span class="fc" id="L348">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L349">        bits = new byte[2];</span>
<span class="fc" id="L350">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L351">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L352">        decoded = instance.toByteArray(&quot;0000111111111111&quot;);</span>
<span class="fc" id="L353">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L354">        bits = new byte[2];</span>
<span class="fc" id="L355">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L356">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L357">        decoded = instance.toByteArray(&quot;0001111111111111&quot;);</span>
<span class="fc" id="L358">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L359">        bits = new byte[2];</span>
<span class="fc" id="L360">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L361">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L362">        decoded = instance.toByteArray(&quot;0011111111111111&quot;);</span>
<span class="fc" id="L363">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L364">        bits = new byte[2];</span>
<span class="fc" id="L365">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L366">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L367">        decoded = instance.toByteArray(&quot;0111111111111111&quot;);</span>
<span class="fc" id="L368">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L369">        bits = new byte[2];</span>
<span class="fc" id="L370">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L371">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L372">        decoded = instance.toByteArray(&quot;1111111111111111&quot;);</span>
<span class="fc" id="L373">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L374">        assertEquals(0, instance.toByteArray((String) null).length);</span>
<span class="fc" id="L375">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test fromAscii(char[])
    //
    // ------------------------------------------------------------------------
    /*
     * Tests for byte[] fromAscii(char[])
     */
    @Test
    public void testFromAsciiCharArray() {
<span class="fc" id="L387">        assertEquals(0, BinaryCodec.fromAscii((char[]) null).length);</span>
<span class="fc" id="L388">        assertEquals(0, BinaryCodec.fromAscii(new char[0]).length);</span>
        // With a single raw binary
<span class="fc" id="L390">        byte[] bits = new byte[1];</span>
<span class="fc" id="L391">        byte[] decoded = BinaryCodec.fromAscii(&quot;00000000&quot;.toCharArray());</span>
<span class="fc" id="L392">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L393">        bits = new byte[1];</span>
<span class="fc" id="L394">        bits[0] = BIT_0;</span>
<span class="fc" id="L395">        decoded = BinaryCodec.fromAscii(&quot;00000001&quot;.toCharArray());</span>
<span class="fc" id="L396">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L397">        bits = new byte[1];</span>
<span class="fc" id="L398">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L399">        decoded = BinaryCodec.fromAscii(&quot;00000011&quot;.toCharArray());</span>
<span class="fc" id="L400">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L401">        bits = new byte[1];</span>
<span class="fc" id="L402">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L403">        decoded = BinaryCodec.fromAscii(&quot;00000111&quot;.toCharArray());</span>
<span class="fc" id="L404">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L405">        bits = new byte[1];</span>
<span class="fc" id="L406">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L407">        decoded = BinaryCodec.fromAscii(&quot;00001111&quot;.toCharArray());</span>
<span class="fc" id="L408">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L409">        bits = new byte[1];</span>
<span class="fc" id="L410">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L411">        decoded = BinaryCodec.fromAscii(&quot;00011111&quot;.toCharArray());</span>
<span class="fc" id="L412">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L413">        bits = new byte[1];</span>
<span class="fc" id="L414">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L415">        decoded = BinaryCodec.fromAscii(&quot;00111111&quot;.toCharArray());</span>
<span class="fc" id="L416">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L417">        bits = new byte[1];</span>
<span class="fc" id="L418">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L419">        decoded = BinaryCodec.fromAscii(&quot;01111111&quot;.toCharArray());</span>
<span class="fc" id="L420">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L421">        bits = new byte[1];</span>
<span class="fc" id="L422">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L423">        decoded = BinaryCodec.fromAscii(&quot;11111111&quot;.toCharArray());</span>
<span class="fc" id="L424">        assertEquals(new String(bits), new String(decoded));</span>
        // With a two raw binaries
<span class="fc" id="L426">        bits = new byte[2];</span>
<span class="fc" id="L427">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L428">        decoded = BinaryCodec.fromAscii(&quot;0000000011111111&quot;.toCharArray());</span>
<span class="fc" id="L429">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L430">        bits = new byte[2];</span>
<span class="fc" id="L431">        bits[1] = BIT_0;</span>
<span class="fc" id="L432">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L433">        decoded = BinaryCodec.fromAscii(&quot;0000000111111111&quot;.toCharArray());</span>
<span class="fc" id="L434">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L435">        bits = new byte[2];</span>
<span class="fc" id="L436">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L437">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L438">        decoded = BinaryCodec.fromAscii(&quot;0000001111111111&quot;.toCharArray());</span>
<span class="fc" id="L439">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L440">        bits = new byte[2];</span>
<span class="fc" id="L441">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L442">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L443">        decoded = BinaryCodec.fromAscii(&quot;0000011111111111&quot;.toCharArray());</span>
<span class="fc" id="L444">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L445">        bits = new byte[2];</span>
<span class="fc" id="L446">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L447">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L448">        decoded = BinaryCodec.fromAscii(&quot;0000111111111111&quot;.toCharArray());</span>
<span class="fc" id="L449">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L450">        bits = new byte[2];</span>
<span class="fc" id="L451">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L452">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L453">        decoded = BinaryCodec.fromAscii(&quot;0001111111111111&quot;.toCharArray());</span>
<span class="fc" id="L454">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L455">        bits = new byte[2];</span>
<span class="fc" id="L456">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L457">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L458">        decoded = BinaryCodec.fromAscii(&quot;0011111111111111&quot;.toCharArray());</span>
<span class="fc" id="L459">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L460">        bits = new byte[2];</span>
<span class="fc" id="L461">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L462">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L463">        decoded = BinaryCodec.fromAscii(&quot;0111111111111111&quot;.toCharArray());</span>
<span class="fc" id="L464">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L465">        bits = new byte[2];</span>
<span class="fc" id="L466">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L467">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L468">        decoded = BinaryCodec.fromAscii(&quot;1111111111111111&quot;.toCharArray());</span>
<span class="fc" id="L469">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L470">        assertEquals(0, BinaryCodec.fromAscii((char[]) null).length);</span>
<span class="fc" id="L471">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test fromAscii(byte[])
    //
    // ------------------------------------------------------------------------
    /*
     * Tests for byte[] fromAscii(byte[])
     */
    @Test
    public void testFromAsciiByteArray() {
<span class="fc" id="L483">        assertEquals(0, BinaryCodec.fromAscii((byte[]) null).length);</span>
<span class="fc" id="L484">        assertEquals(0, BinaryCodec.fromAscii(new byte[0]).length);</span>
        // With a single raw binary
<span class="fc" id="L486">        byte[] bits = new byte[1];</span>
<span class="fc" id="L487">        byte[] decoded = BinaryCodec.fromAscii(&quot;00000000&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L488">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L489">        bits = new byte[1];</span>
<span class="fc" id="L490">        bits[0] = BIT_0;</span>
<span class="fc" id="L491">        decoded = BinaryCodec.fromAscii(&quot;00000001&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L492">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L493">        bits = new byte[1];</span>
<span class="fc" id="L494">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L495">        decoded = BinaryCodec.fromAscii(&quot;00000011&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L496">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L497">        bits = new byte[1];</span>
<span class="fc" id="L498">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L499">        decoded = BinaryCodec.fromAscii(&quot;00000111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L500">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L501">        bits = new byte[1];</span>
<span class="fc" id="L502">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L503">        decoded = BinaryCodec.fromAscii(&quot;00001111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L504">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L505">        bits = new byte[1];</span>
<span class="fc" id="L506">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L507">        decoded = BinaryCodec.fromAscii(&quot;00011111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L508">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L509">        bits = new byte[1];</span>
<span class="fc" id="L510">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L511">        decoded = BinaryCodec.fromAscii(&quot;00111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L512">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L513">        bits = new byte[1];</span>
<span class="fc" id="L514">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L515">        decoded = BinaryCodec.fromAscii(&quot;01111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L516">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L517">        bits = new byte[1];</span>
<span class="fc" id="L518">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L519">        decoded = BinaryCodec.fromAscii(&quot;11111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L520">        assertEquals(new String(bits), new String(decoded));</span>
        // With a two raw binaries
<span class="fc" id="L522">        bits = new byte[2];</span>
<span class="fc" id="L523">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L524">        decoded = BinaryCodec.fromAscii(&quot;0000000011111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L525">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L526">        bits = new byte[2];</span>
<span class="fc" id="L527">        bits[1] = BIT_0;</span>
<span class="fc" id="L528">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L529">        decoded = BinaryCodec.fromAscii(&quot;0000000111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L530">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L531">        bits = new byte[2];</span>
<span class="fc" id="L532">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L533">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L534">        decoded = BinaryCodec.fromAscii(&quot;0000001111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L535">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L536">        bits = new byte[2];</span>
<span class="fc" id="L537">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L538">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L539">        decoded = BinaryCodec.fromAscii(&quot;0000011111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L540">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L541">        bits = new byte[2];</span>
<span class="fc" id="L542">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L543">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L544">        decoded = BinaryCodec.fromAscii(&quot;0000111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L545">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L546">        bits = new byte[2];</span>
<span class="fc" id="L547">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L548">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L549">        decoded = BinaryCodec.fromAscii(&quot;0001111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L550">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L551">        bits = new byte[2];</span>
<span class="fc" id="L552">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L553">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L554">        decoded = BinaryCodec.fromAscii(&quot;0011111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L555">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L556">        bits = new byte[2];</span>
<span class="fc" id="L557">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L558">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L559">        decoded = BinaryCodec.fromAscii(&quot;0111111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L560">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L561">        bits = new byte[2];</span>
<span class="fc" id="L562">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L563">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L564">        decoded = BinaryCodec.fromAscii(&quot;1111111111111111&quot;.getBytes(Charsets.UTF_8));</span>
<span class="fc" id="L565">        assertEquals(new String(bits), new String(decoded));</span>
<span class="fc" id="L566">        assertEquals(0, BinaryCodec.fromAscii((byte[]) null).length);</span>
<span class="fc" id="L567">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test encode(byte[])
    //
    // ------------------------------------------------------------------------
    /*
     * Tests for byte[] encode(byte[])
     */
    @Test
    public void testEncodeByteArray() {
        // With a single raw binary
<span class="fc" id="L580">        byte[] bits = new byte[1];</span>
<span class="fc" id="L581">        String l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L582">        assertEquals(&quot;00000000&quot;, l_encoded);</span>
<span class="fc" id="L583">        bits = new byte[1];</span>
<span class="fc" id="L584">        bits[0] = BIT_0;</span>
<span class="fc" id="L585">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L586">        assertEquals(&quot;00000001&quot;, l_encoded);</span>
<span class="fc" id="L587">        bits = new byte[1];</span>
<span class="fc" id="L588">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L589">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L590">        assertEquals(&quot;00000011&quot;, l_encoded);</span>
<span class="fc" id="L591">        bits = new byte[1];</span>
<span class="fc" id="L592">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L593">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L594">        assertEquals(&quot;00000111&quot;, l_encoded);</span>
<span class="fc" id="L595">        bits = new byte[1];</span>
<span class="fc" id="L596">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L597">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L598">        assertEquals(&quot;00001111&quot;, l_encoded);</span>
<span class="fc" id="L599">        bits = new byte[1];</span>
<span class="fc" id="L600">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L601">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L602">        assertEquals(&quot;00011111&quot;, l_encoded);</span>
<span class="fc" id="L603">        bits = new byte[1];</span>
<span class="fc" id="L604">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L605">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L606">        assertEquals(&quot;00111111&quot;, l_encoded);</span>
<span class="fc" id="L607">        bits = new byte[1];</span>
<span class="fc" id="L608">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L609">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L610">        assertEquals(&quot;01111111&quot;, l_encoded);</span>
<span class="fc" id="L611">        bits = new byte[1];</span>
<span class="fc" id="L612">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L613">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L614">        assertEquals(&quot;11111111&quot;, l_encoded);</span>
        // With a two raw binaries
<span class="fc" id="L616">        bits = new byte[2];</span>
<span class="fc" id="L617">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L618">        assertEquals(&quot;0000000000000000&quot;, l_encoded);</span>
<span class="fc" id="L619">        bits = new byte[2];</span>
<span class="fc" id="L620">        bits[0] = BIT_0;</span>
<span class="fc" id="L621">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L622">        assertEquals(&quot;0000000000000001&quot;, l_encoded);</span>
<span class="fc" id="L623">        bits = new byte[2];</span>
<span class="fc" id="L624">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L625">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L626">        assertEquals(&quot;0000000000000011&quot;, l_encoded);</span>
<span class="fc" id="L627">        bits = new byte[2];</span>
<span class="fc" id="L628">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L629">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L630">        assertEquals(&quot;0000000000000111&quot;, l_encoded);</span>
<span class="fc" id="L631">        bits = new byte[2];</span>
<span class="fc" id="L632">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L633">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L634">        assertEquals(&quot;0000000000001111&quot;, l_encoded);</span>
<span class="fc" id="L635">        bits = new byte[2];</span>
<span class="fc" id="L636">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L637">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L638">        assertEquals(&quot;0000000000011111&quot;, l_encoded);</span>
<span class="fc" id="L639">        bits = new byte[2];</span>
<span class="fc" id="L640">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L641">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L642">        assertEquals(&quot;0000000000111111&quot;, l_encoded);</span>
<span class="fc" id="L643">        bits = new byte[2];</span>
<span class="fc" id="L644">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L645">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L646">        assertEquals(&quot;0000000001111111&quot;, l_encoded);</span>
<span class="fc" id="L647">        bits = new byte[2];</span>
<span class="fc" id="L648">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L649">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L650">        assertEquals(&quot;0000000011111111&quot;, l_encoded);</span>
        // work on the other byte now
<span class="fc" id="L652">        bits = new byte[2];</span>
<span class="fc" id="L653">        bits[1] = BIT_0;</span>
<span class="fc" id="L654">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L655">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L656">        assertEquals(&quot;0000000111111111&quot;, l_encoded);</span>
<span class="fc" id="L657">        bits = new byte[2];</span>
<span class="fc" id="L658">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L659">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L660">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L661">        assertEquals(&quot;0000001111111111&quot;, l_encoded);</span>
<span class="fc" id="L662">        bits = new byte[2];</span>
<span class="fc" id="L663">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L664">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L665">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L666">        assertEquals(&quot;0000011111111111&quot;, l_encoded);</span>
<span class="fc" id="L667">        bits = new byte[2];</span>
<span class="fc" id="L668">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L669">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L670">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L671">        assertEquals(&quot;0000111111111111&quot;, l_encoded);</span>
<span class="fc" id="L672">        bits = new byte[2];</span>
<span class="fc" id="L673">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L674">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L675">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L676">        assertEquals(&quot;0001111111111111&quot;, l_encoded);</span>
<span class="fc" id="L677">        bits = new byte[2];</span>
<span class="fc" id="L678">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L679">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L680">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L681">        assertEquals(&quot;0011111111111111&quot;, l_encoded);</span>
<span class="fc" id="L682">        bits = new byte[2];</span>
<span class="fc" id="L683">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L684">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L685">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L686">        assertEquals(&quot;0111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L687">        bits = new byte[2];</span>
<span class="fc" id="L688">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L689">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L690">        l_encoded = new String(instance.encode(bits));</span>
<span class="fc" id="L691">        assertEquals(&quot;1111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L692">        assertEquals(0, instance.encode((byte[]) null).length);</span>
<span class="fc" id="L693">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test toAsciiBytes
    //
    // ------------------------------------------------------------------------
    @Test
    public void testToAsciiBytes() {
        // With a single raw binary
<span class="fc" id="L703">        byte[] bits = new byte[1];</span>
<span class="fc" id="L704">        String l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L705">        assertEquals(&quot;00000000&quot;, l_encoded);</span>
<span class="fc" id="L706">        bits = new byte[1];</span>
<span class="fc" id="L707">        bits[0] = BIT_0;</span>
<span class="fc" id="L708">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L709">        assertEquals(&quot;00000001&quot;, l_encoded);</span>
<span class="fc" id="L710">        bits = new byte[1];</span>
<span class="fc" id="L711">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L712">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L713">        assertEquals(&quot;00000011&quot;, l_encoded);</span>
<span class="fc" id="L714">        bits = new byte[1];</span>
<span class="fc" id="L715">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L716">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L717">        assertEquals(&quot;00000111&quot;, l_encoded);</span>
<span class="fc" id="L718">        bits = new byte[1];</span>
<span class="fc" id="L719">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L720">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L721">        assertEquals(&quot;00001111&quot;, l_encoded);</span>
<span class="fc" id="L722">        bits = new byte[1];</span>
<span class="fc" id="L723">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L724">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L725">        assertEquals(&quot;00011111&quot;, l_encoded);</span>
<span class="fc" id="L726">        bits = new byte[1];</span>
<span class="fc" id="L727">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L728">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L729">        assertEquals(&quot;00111111&quot;, l_encoded);</span>
<span class="fc" id="L730">        bits = new byte[1];</span>
<span class="fc" id="L731">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L732">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L733">        assertEquals(&quot;01111111&quot;, l_encoded);</span>
<span class="fc" id="L734">        bits = new byte[1];</span>
<span class="fc" id="L735">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L736">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L737">        assertEquals(&quot;11111111&quot;, l_encoded);</span>
        // With a two raw binaries
<span class="fc" id="L739">        bits = new byte[2];</span>
<span class="fc" id="L740">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L741">        assertEquals(&quot;0000000000000000&quot;, l_encoded);</span>
<span class="fc" id="L742">        bits = new byte[2];</span>
<span class="fc" id="L743">        bits[0] = BIT_0;</span>
<span class="fc" id="L744">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L745">        assertEquals(&quot;0000000000000001&quot;, l_encoded);</span>
<span class="fc" id="L746">        bits = new byte[2];</span>
<span class="fc" id="L747">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L748">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L749">        assertEquals(&quot;0000000000000011&quot;, l_encoded);</span>
<span class="fc" id="L750">        bits = new byte[2];</span>
<span class="fc" id="L751">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L752">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L753">        assertEquals(&quot;0000000000000111&quot;, l_encoded);</span>
<span class="fc" id="L754">        bits = new byte[2];</span>
<span class="fc" id="L755">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L756">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L757">        assertEquals(&quot;0000000000001111&quot;, l_encoded);</span>
<span class="fc" id="L758">        bits = new byte[2];</span>
<span class="fc" id="L759">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L760">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L761">        assertEquals(&quot;0000000000011111&quot;, l_encoded);</span>
<span class="fc" id="L762">        bits = new byte[2];</span>
<span class="fc" id="L763">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L764">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L765">        assertEquals(&quot;0000000000111111&quot;, l_encoded);</span>
<span class="fc" id="L766">        bits = new byte[2];</span>
<span class="fc" id="L767">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L768">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L769">        assertEquals(&quot;0000000001111111&quot;, l_encoded);</span>
<span class="fc" id="L770">        bits = new byte[2];</span>
<span class="fc" id="L771">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L772">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L773">        assertEquals(&quot;0000000011111111&quot;, l_encoded);</span>
        // work on the other byte now
<span class="fc" id="L775">        bits = new byte[2];</span>
<span class="fc" id="L776">        bits[1] = BIT_0;</span>
<span class="fc" id="L777">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L778">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L779">        assertEquals(&quot;0000000111111111&quot;, l_encoded);</span>
<span class="fc" id="L780">        bits = new byte[2];</span>
<span class="fc" id="L781">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L782">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L783">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L784">        assertEquals(&quot;0000001111111111&quot;, l_encoded);</span>
<span class="fc" id="L785">        bits = new byte[2];</span>
<span class="fc" id="L786">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L787">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L788">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L789">        assertEquals(&quot;0000011111111111&quot;, l_encoded);</span>
<span class="fc" id="L790">        bits = new byte[2];</span>
<span class="fc" id="L791">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L792">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L793">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L794">        assertEquals(&quot;0000111111111111&quot;, l_encoded);</span>
<span class="fc" id="L795">        bits = new byte[2];</span>
<span class="fc" id="L796">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L797">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L798">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L799">        assertEquals(&quot;0001111111111111&quot;, l_encoded);</span>
<span class="fc" id="L800">        bits = new byte[2];</span>
<span class="fc" id="L801">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L802">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L803">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L804">        assertEquals(&quot;0011111111111111&quot;, l_encoded);</span>
<span class="fc" id="L805">        bits = new byte[2];</span>
<span class="fc" id="L806">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L807">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L808">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L809">        assertEquals(&quot;0111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L810">        bits = new byte[2];</span>
<span class="fc" id="L811">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L812">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L813">        l_encoded = new String(BinaryCodec.toAsciiBytes(bits));</span>
<span class="fc" id="L814">        assertEquals(&quot;1111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L815">        assertEquals(0, BinaryCodec.toAsciiBytes((byte[]) null).length);</span>
<span class="fc" id="L816">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test toAsciiChars
    //
    // ------------------------------------------------------------------------
    @Test
    public void testToAsciiChars() {
        // With a single raw binary
<span class="fc" id="L826">        byte[] bits = new byte[1];</span>
<span class="fc" id="L827">        String l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L828">        assertEquals(&quot;00000000&quot;, l_encoded);</span>
<span class="fc" id="L829">        bits = new byte[1];</span>
<span class="fc" id="L830">        bits[0] = BIT_0;</span>
<span class="fc" id="L831">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L832">        assertEquals(&quot;00000001&quot;, l_encoded);</span>
<span class="fc" id="L833">        bits = new byte[1];</span>
<span class="fc" id="L834">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L835">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L836">        assertEquals(&quot;00000011&quot;, l_encoded);</span>
<span class="fc" id="L837">        bits = new byte[1];</span>
<span class="fc" id="L838">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L839">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L840">        assertEquals(&quot;00000111&quot;, l_encoded);</span>
<span class="fc" id="L841">        bits = new byte[1];</span>
<span class="fc" id="L842">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L843">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L844">        assertEquals(&quot;00001111&quot;, l_encoded);</span>
<span class="fc" id="L845">        bits = new byte[1];</span>
<span class="fc" id="L846">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L847">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L848">        assertEquals(&quot;00011111&quot;, l_encoded);</span>
<span class="fc" id="L849">        bits = new byte[1];</span>
<span class="fc" id="L850">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L851">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L852">        assertEquals(&quot;00111111&quot;, l_encoded);</span>
<span class="fc" id="L853">        bits = new byte[1];</span>
<span class="fc" id="L854">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L855">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L856">        assertEquals(&quot;01111111&quot;, l_encoded);</span>
<span class="fc" id="L857">        bits = new byte[1];</span>
<span class="fc" id="L858">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L859">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L860">        assertEquals(&quot;11111111&quot;, l_encoded);</span>
        // With a two raw binaries
<span class="fc" id="L862">        bits = new byte[2];</span>
<span class="fc" id="L863">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L864">        assertEquals(&quot;0000000000000000&quot;, l_encoded);</span>
<span class="fc" id="L865">        bits = new byte[2];</span>
<span class="fc" id="L866">        bits[0] = BIT_0;</span>
<span class="fc" id="L867">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L868">        assertEquals(&quot;0000000000000001&quot;, l_encoded);</span>
<span class="fc" id="L869">        bits = new byte[2];</span>
<span class="fc" id="L870">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L871">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L872">        assertEquals(&quot;0000000000000011&quot;, l_encoded);</span>
<span class="fc" id="L873">        bits = new byte[2];</span>
<span class="fc" id="L874">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L875">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L876">        assertEquals(&quot;0000000000000111&quot;, l_encoded);</span>
<span class="fc" id="L877">        bits = new byte[2];</span>
<span class="fc" id="L878">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L879">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L880">        assertEquals(&quot;0000000000001111&quot;, l_encoded);</span>
<span class="fc" id="L881">        bits = new byte[2];</span>
<span class="fc" id="L882">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L883">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L884">        assertEquals(&quot;0000000000011111&quot;, l_encoded);</span>
<span class="fc" id="L885">        bits = new byte[2];</span>
<span class="fc" id="L886">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L887">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L888">        assertEquals(&quot;0000000000111111&quot;, l_encoded);</span>
<span class="fc" id="L889">        bits = new byte[2];</span>
<span class="fc" id="L890">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L891">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L892">        assertEquals(&quot;0000000001111111&quot;, l_encoded);</span>
<span class="fc" id="L893">        bits = new byte[2];</span>
<span class="fc" id="L894">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L895">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L896">        assertEquals(&quot;0000000011111111&quot;, l_encoded);</span>
        // work on the other byte now
<span class="fc" id="L898">        bits = new byte[2];</span>
<span class="fc" id="L899">        bits[1] = BIT_0;</span>
<span class="fc" id="L900">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L901">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L902">        assertEquals(&quot;0000000111111111&quot;, l_encoded);</span>
<span class="fc" id="L903">        bits = new byte[2];</span>
<span class="fc" id="L904">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L905">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L906">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L907">        assertEquals(&quot;0000001111111111&quot;, l_encoded);</span>
<span class="fc" id="L908">        bits = new byte[2];</span>
<span class="fc" id="L909">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L910">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L911">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L912">        assertEquals(&quot;0000011111111111&quot;, l_encoded);</span>
<span class="fc" id="L913">        bits = new byte[2];</span>
<span class="fc" id="L914">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L915">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L916">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L917">        assertEquals(&quot;0000111111111111&quot;, l_encoded);</span>
<span class="fc" id="L918">        bits = new byte[2];</span>
<span class="fc" id="L919">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L920">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L921">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L922">        assertEquals(&quot;0001111111111111&quot;, l_encoded);</span>
<span class="fc" id="L923">        bits = new byte[2];</span>
<span class="fc" id="L924">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L925">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L926">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L927">        assertEquals(&quot;0011111111111111&quot;, l_encoded);</span>
<span class="fc" id="L928">        bits = new byte[2];</span>
<span class="fc" id="L929">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L930">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L931">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L932">        assertEquals(&quot;0111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L933">        bits = new byte[2];</span>
<span class="fc" id="L934">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L935">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L936">        l_encoded = new String(BinaryCodec.toAsciiChars(bits));</span>
<span class="fc" id="L937">        assertEquals(&quot;1111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L938">        assertEquals(0, BinaryCodec.toAsciiChars((byte[]) null).length);</span>
<span class="fc" id="L939">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test toAsciiString
    //
    // ------------------------------------------------------------------------
    /**
     * Tests the toAsciiString(byte[]) method
     */
    @Test
    public void testToAsciiString() {
        // With a single raw binary
<span class="fc" id="L952">        byte[] bits = new byte[1];</span>
<span class="fc" id="L953">        String l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L954">        assertEquals(&quot;00000000&quot;, l_encoded);</span>
<span class="fc" id="L955">        bits = new byte[1];</span>
<span class="fc" id="L956">        bits[0] = BIT_0;</span>
<span class="fc" id="L957">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L958">        assertEquals(&quot;00000001&quot;, l_encoded);</span>
<span class="fc" id="L959">        bits = new byte[1];</span>
<span class="fc" id="L960">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L961">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L962">        assertEquals(&quot;00000011&quot;, l_encoded);</span>
<span class="fc" id="L963">        bits = new byte[1];</span>
<span class="fc" id="L964">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L965">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L966">        assertEquals(&quot;00000111&quot;, l_encoded);</span>
<span class="fc" id="L967">        bits = new byte[1];</span>
<span class="fc" id="L968">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L969">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L970">        assertEquals(&quot;00001111&quot;, l_encoded);</span>
<span class="fc" id="L971">        bits = new byte[1];</span>
<span class="fc" id="L972">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L973">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L974">        assertEquals(&quot;00011111&quot;, l_encoded);</span>
<span class="fc" id="L975">        bits = new byte[1];</span>
<span class="fc" id="L976">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L977">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L978">        assertEquals(&quot;00111111&quot;, l_encoded);</span>
<span class="fc" id="L979">        bits = new byte[1];</span>
<span class="fc" id="L980">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L981">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L982">        assertEquals(&quot;01111111&quot;, l_encoded);</span>
<span class="fc" id="L983">        bits = new byte[1];</span>
<span class="fc" id="L984">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L985">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L986">        assertEquals(&quot;11111111&quot;, l_encoded);</span>
        // With a two raw binaries
<span class="fc" id="L988">        bits = new byte[2];</span>
<span class="fc" id="L989">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L990">        assertEquals(&quot;0000000000000000&quot;, l_encoded);</span>
<span class="fc" id="L991">        bits = new byte[2];</span>
<span class="fc" id="L992">        bits[0] = BIT_0;</span>
<span class="fc" id="L993">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L994">        assertEquals(&quot;0000000000000001&quot;, l_encoded);</span>
<span class="fc" id="L995">        bits = new byte[2];</span>
<span class="fc" id="L996">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L997">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L998">        assertEquals(&quot;0000000000000011&quot;, l_encoded);</span>
<span class="fc" id="L999">        bits = new byte[2];</span>
<span class="fc" id="L1000">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L1001">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1002">        assertEquals(&quot;0000000000000111&quot;, l_encoded);</span>
<span class="fc" id="L1003">        bits = new byte[2];</span>
<span class="fc" id="L1004">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L1005">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1006">        assertEquals(&quot;0000000000001111&quot;, l_encoded);</span>
<span class="fc" id="L1007">        bits = new byte[2];</span>
<span class="fc" id="L1008">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L1009">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1010">        assertEquals(&quot;0000000000011111&quot;, l_encoded);</span>
<span class="fc" id="L1011">        bits = new byte[2];</span>
<span class="fc" id="L1012">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L1013">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1014">        assertEquals(&quot;0000000000111111&quot;, l_encoded);</span>
<span class="fc" id="L1015">        bits = new byte[2];</span>
<span class="fc" id="L1016">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L1017">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1018">        assertEquals(&quot;0000000001111111&quot;, l_encoded);</span>
<span class="fc" id="L1019">        bits = new byte[2];</span>
<span class="fc" id="L1020">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1021">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1022">        assertEquals(&quot;0000000011111111&quot;, l_encoded);</span>
        // work on the other byte now
<span class="fc" id="L1024">        bits = new byte[2];</span>
<span class="fc" id="L1025">        bits[1] = BIT_0;</span>
<span class="fc" id="L1026">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1027">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1028">        assertEquals(&quot;0000000111111111&quot;, l_encoded);</span>
<span class="fc" id="L1029">        bits = new byte[2];</span>
<span class="fc" id="L1030">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L1031">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1032">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1033">        assertEquals(&quot;0000001111111111&quot;, l_encoded);</span>
<span class="fc" id="L1034">        bits = new byte[2];</span>
<span class="fc" id="L1035">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L1036">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1037">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1038">        assertEquals(&quot;0000011111111111&quot;, l_encoded);</span>
<span class="fc" id="L1039">        bits = new byte[2];</span>
<span class="fc" id="L1040">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L1041">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1042">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1043">        assertEquals(&quot;0000111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1044">        bits = new byte[2];</span>
<span class="fc" id="L1045">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L1046">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1047">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1048">        assertEquals(&quot;0001111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1049">        bits = new byte[2];</span>
<span class="fc" id="L1050">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L1051">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1052">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1053">        assertEquals(&quot;0011111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1054">        bits = new byte[2];</span>
<span class="fc" id="L1055">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L1056">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1057">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1058">        assertEquals(&quot;0111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1059">        bits = new byte[2];</span>
<span class="fc" id="L1060">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1061">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1062">        l_encoded = BinaryCodec.toAsciiString(bits);</span>
<span class="fc" id="L1063">        assertEquals(&quot;1111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1064">    }</span>

    // ------------------------------------------------------------------------
    //
    // Test encode(Object)
    //
    // ------------------------------------------------------------------------
    /*
     * Tests for Object encode(Object)
     */
    @Test
    public void testEncodeObjectNull() throws Exception {
<span class="fc" id="L1076">        final Object obj = new byte[0];</span>
<span class="fc" id="L1077">        assertEquals(0, ((char[]) instance.encode(obj)).length);</span>
<span class="fc" id="L1078">    }</span>

    /*
     * Tests for Object encode(Object)
     */
    @Test
    public void testEncodeObjectException() {
        try {
<span class="nc" id="L1086">            instance.encode(&quot;&quot;);</span>
<span class="fc" id="L1087">        } catch (final EncoderException e) {</span>
            // all is well.
<span class="fc" id="L1089">            return;</span>
<span class="nc" id="L1090">        }</span>
<span class="nc" id="L1091">        fail(&quot;Expected EncoderException&quot;);</span>
<span class="nc" id="L1092">    }</span>

    /*
     * Tests for Object encode(Object)
     */
    @Test
    public void testEncodeObject() throws Exception {
        // With a single raw binary
<span class="fc" id="L1100">        byte[] bits = new byte[1];</span>
<span class="fc" id="L1101">        String l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1102">        assertEquals(&quot;00000000&quot;, l_encoded);</span>
<span class="fc" id="L1103">        bits = new byte[1];</span>
<span class="fc" id="L1104">        bits[0] = BIT_0;</span>
<span class="fc" id="L1105">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1106">        assertEquals(&quot;00000001&quot;, l_encoded);</span>
<span class="fc" id="L1107">        bits = new byte[1];</span>
<span class="fc" id="L1108">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L1109">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1110">        assertEquals(&quot;00000011&quot;, l_encoded);</span>
<span class="fc" id="L1111">        bits = new byte[1];</span>
<span class="fc" id="L1112">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L1113">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1114">        assertEquals(&quot;00000111&quot;, l_encoded);</span>
<span class="fc" id="L1115">        bits = new byte[1];</span>
<span class="fc" id="L1116">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L1117">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1118">        assertEquals(&quot;00001111&quot;, l_encoded);</span>
<span class="fc" id="L1119">        bits = new byte[1];</span>
<span class="fc" id="L1120">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L1121">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1122">        assertEquals(&quot;00011111&quot;, l_encoded);</span>
<span class="fc" id="L1123">        bits = new byte[1];</span>
<span class="fc" id="L1124">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L1125">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1126">        assertEquals(&quot;00111111&quot;, l_encoded);</span>
<span class="fc" id="L1127">        bits = new byte[1];</span>
<span class="fc" id="L1128">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L1129">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1130">        assertEquals(&quot;01111111&quot;, l_encoded);</span>
<span class="fc" id="L1131">        bits = new byte[1];</span>
<span class="fc" id="L1132">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1133">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1134">        assertEquals(&quot;11111111&quot;, l_encoded);</span>
        // With a two raw binaries
<span class="fc" id="L1136">        bits = new byte[2];</span>
<span class="fc" id="L1137">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1138">        assertEquals(&quot;0000000000000000&quot;, l_encoded);</span>
<span class="fc" id="L1139">        bits = new byte[2];</span>
<span class="fc" id="L1140">        bits[0] = BIT_0;</span>
<span class="fc" id="L1141">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1142">        assertEquals(&quot;0000000000000001&quot;, l_encoded);</span>
<span class="fc" id="L1143">        bits = new byte[2];</span>
<span class="fc" id="L1144">        bits[0] = BIT_0 | BIT_1;</span>
<span class="fc" id="L1145">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1146">        assertEquals(&quot;0000000000000011&quot;, l_encoded);</span>
<span class="fc" id="L1147">        bits = new byte[2];</span>
<span class="fc" id="L1148">        bits[0] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L1149">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1150">        assertEquals(&quot;0000000000000111&quot;, l_encoded);</span>
<span class="fc" id="L1151">        bits = new byte[2];</span>
<span class="fc" id="L1152">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L1153">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1154">        assertEquals(&quot;0000000000001111&quot;, l_encoded);</span>
<span class="fc" id="L1155">        bits = new byte[2];</span>
<span class="fc" id="L1156">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L1157">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1158">        assertEquals(&quot;0000000000011111&quot;, l_encoded);</span>
<span class="fc" id="L1159">        bits = new byte[2];</span>
<span class="fc" id="L1160">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L1161">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1162">        assertEquals(&quot;0000000000111111&quot;, l_encoded);</span>
<span class="fc" id="L1163">        bits = new byte[2];</span>
<span class="fc" id="L1164">        bits[0] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L1165">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1166">        assertEquals(&quot;0000000001111111&quot;, l_encoded);</span>
<span class="fc" id="L1167">        bits = new byte[2];</span>
<span class="fc" id="L1168">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1169">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1170">        assertEquals(&quot;0000000011111111&quot;, l_encoded);</span>
        // work on the other byte now
<span class="fc" id="L1172">        bits = new byte[2];</span>
<span class="fc" id="L1173">        bits[1] = BIT_0;</span>
<span class="fc" id="L1174">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1175">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1176">        assertEquals(&quot;0000000111111111&quot;, l_encoded);</span>
<span class="fc" id="L1177">        bits = new byte[2];</span>
<span class="fc" id="L1178">        bits[1] = BIT_0 | BIT_1;</span>
<span class="fc" id="L1179">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1180">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1181">        assertEquals(&quot;0000001111111111&quot;, l_encoded);</span>
<span class="fc" id="L1182">        bits = new byte[2];</span>
<span class="fc" id="L1183">        bits[1] = BIT_0 | BIT_1 | BIT_2;</span>
<span class="fc" id="L1184">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1185">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1186">        assertEquals(&quot;0000011111111111&quot;, l_encoded);</span>
<span class="fc" id="L1187">        bits = new byte[2];</span>
<span class="fc" id="L1188">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3;</span>
<span class="fc" id="L1189">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1190">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1191">        assertEquals(&quot;0000111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1192">        bits = new byte[2];</span>
<span class="fc" id="L1193">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4;</span>
<span class="fc" id="L1194">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1195">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1196">        assertEquals(&quot;0001111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1197">        bits = new byte[2];</span>
<span class="fc" id="L1198">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5;</span>
<span class="fc" id="L1199">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1200">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1201">        assertEquals(&quot;0011111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1202">        bits = new byte[2];</span>
<span class="fc" id="L1203">        bits[1] = BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6;</span>
<span class="fc" id="L1204">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1205">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1206">        assertEquals(&quot;0111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1207">        bits = new byte[2];</span>
<span class="fc" id="L1208">        bits[0] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1209">        bits[1] = (byte) (BIT_0 | BIT_1 | BIT_2 | BIT_3 | BIT_4 | BIT_5 | BIT_6 | BIT_7);</span>
<span class="fc" id="L1210">        l_encoded = new String((char[]) instance.encode((Object) bits));</span>
<span class="fc" id="L1211">        assertEquals(&quot;1111111111111111&quot;, l_encoded);</span>
<span class="fc" id="L1212">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.2.201808211720</span></div></body></html>