


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html id="htmlId">
<head>
  <title>Coverage Report :: RegressionResults</title>
  <style type="text/css">
    @import "../../.css/coverage.css";
  </style>
</head>

<body>
<div class="header"></div>

<div class="content">
<div class="breadCrumbs">
    [ <a href="../../index.html">all classes</a> ]
    [ <a href="../index.html">org.apache.commons.math4.stat.regression</a> ]
</div>

<h1>Coverage Summary for Class: RegressionResults (org.apache.commons.math4.stat.regression)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">RegressionResults</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/ 1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    76.5%
  </span>
  <span class="absValue">
    (13/ 17)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    60.9%
  </span>
  <span class="absValue">
    (53/ 87)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<div class="sourceCode"><i>1</i>&nbsp;/*
<i>2</i>&nbsp; * Licensed to the Apache Software Foundation (ASF) under one or more
<i>3</i>&nbsp; * contributor license agreements.  See the NOTICE file distributed with
<i>4</i>&nbsp; * this work for additional information regarding copyright ownership.
<i>5</i>&nbsp; * The ASF licenses this file to You under the Apache License, Version 2.0
<i>6</i>&nbsp; * (the &quot;License&quot;); you may not use this file except in compliance with
<i>7</i>&nbsp; * the License.  You may obtain a copy of the License at
<i>8</i>&nbsp; *
<i>9</i>&nbsp; *      http://www.apache.org/licenses/LICENSE-2.0
<i>10</i>&nbsp; *
<i>11</i>&nbsp; * Unless required by applicable law or agreed to in writing, software
<i>12</i>&nbsp; * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
<i>13</i>&nbsp; * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
<i>14</i>&nbsp; * See the License for the specific language governing permissions and
<i>15</i>&nbsp; * limitations under the License.
<i>16</i>&nbsp; */
<i>17</i>&nbsp;package org.apache.commons.math4.stat.regression;
<i>18</i>&nbsp;
<i>19</i>&nbsp;import java.io.Serializable;
<i>20</i>&nbsp;import java.util.Arrays;
<i>21</i>&nbsp;
<i>22</i>&nbsp;import org.apache.commons.math4.exception.OutOfRangeException;
<i>23</i>&nbsp;import org.apache.commons.math4.util.FastMath;
<i>24</i>&nbsp;import org.apache.commons.math4.util.MathArrays;
<i>25</i>&nbsp;
<i>26</i>&nbsp;/**
<i>27</i>&nbsp; * Results of a Multiple Linear Regression model fit.
<i>28</i>&nbsp; *
<i>29</i>&nbsp; * @since 3.0
<i>30</i>&nbsp; */
<i>31</i>&nbsp;public class RegressionResults implements Serializable {
<i>32</i>&nbsp;
<i>33</i>&nbsp;    /** INDEX of Sum of Squared Errors */
<i>34</i>&nbsp;    private static final int SSE_IDX = 0;
<i>35</i>&nbsp;    /** INDEX of Sum of Squares of Model */
<i>36</i>&nbsp;    private static final int SST_IDX = 1;
<i>37</i>&nbsp;    /** INDEX of R-Squared of regression */
<i>38</i>&nbsp;    private static final int RSQ_IDX = 2;
<i>39</i>&nbsp;    /** INDEX of Mean Squared Error */
<i>40</i>&nbsp;    private static final int MSE_IDX = 3;
<i>41</i>&nbsp;    /** INDEX of Adjusted R Squared */
<i>42</i>&nbsp;    private static final int ADJRSQ_IDX = 4;
<i>43</i>&nbsp;    /** UID */
<i>44</i>&nbsp;    private static final long serialVersionUID = 1l;
<i>45</i>&nbsp;    /** regression slope parameters */
<i>46</i>&nbsp;    private final double[] parameters;
<i>47</i>&nbsp;    /** variance covariance matrix of parameters */
<i>48</i>&nbsp;    private final double[][] varCovData;
<i>49</i>&nbsp;    /** boolean flag for variance covariance matrix in symm compressed storage */
<i>50</i>&nbsp;    private final boolean isSymmetricVCD;
<i>51</i>&nbsp;    /** rank of the solution */
<i>52</i>&nbsp;    @SuppressWarnings(&quot;unused&quot;)
<i>53</i>&nbsp;    private final int rank;
<i>54</i>&nbsp;    /** number of observations on which results are based */
<i>55</i>&nbsp;    private final long nobs;
<i>56</i>&nbsp;    /** boolean flag indicator of whether a constant was included*/
<i>57</i>&nbsp;    private final boolean containsConstant;
<i>58</i>&nbsp;    /** array storing global results, SSE, MSE, RSQ, adjRSQ */
<i>59</i>&nbsp;    private final double[] globalFitInfo;
<i>60</i>&nbsp;
<i>61</i>&nbsp;    /**
<i>62</i>&nbsp;     *  Set the default constructor to private access
<i>63</i>&nbsp;     *  to prevent inadvertent instantiation
<i>64</i>&nbsp;     */
<i>65</i>&nbsp;    @SuppressWarnings(&quot;unused&quot;)
<b class="nc"><i>66</i>&nbsp;    private RegressionResults() {</b>
<b class="nc"><i>67</i>&nbsp;        this.parameters = null;</b>
<b class="nc"><i>68</i>&nbsp;        this.varCovData = null;</b>
<b class="nc"><i>69</i>&nbsp;        this.rank = -1;</b>
<b class="nc"><i>70</i>&nbsp;        this.nobs = -1;</b>
<b class="nc"><i>71</i>&nbsp;        this.containsConstant = false;</b>
<b class="nc"><i>72</i>&nbsp;        this.isSymmetricVCD = false;</b>
<b class="nc"><i>73</i>&nbsp;        this.globalFitInfo = null;</b>
<b class="nc"><i>74</i>&nbsp;    }</b>
<i>75</i>&nbsp;
<i>76</i>&nbsp;    /**
<i>77</i>&nbsp;     * Constructor for Regression Results.
<i>78</i>&nbsp;     *
<i>79</i>&nbsp;     * @param parameters a double array with the regression slope estimates
<i>80</i>&nbsp;     * @param varcov the variance covariance matrix, stored either in a square matrix
<i>81</i>&nbsp;     * or as a compressed
<i>82</i>&nbsp;     * @param isSymmetricCompressed a flag which denotes that the variance covariance
<i>83</i>&nbsp;     * matrix is in symmetric compressed format
<i>84</i>&nbsp;     * @param nobs the number of observations of the regression estimation
<i>85</i>&nbsp;     * @param rank the number of independent variables in the regression
<i>86</i>&nbsp;     * @param sumy the sum of the independent variable
<i>87</i>&nbsp;     * @param sumysq the sum of the squared independent variable
<i>88</i>&nbsp;     * @param sse sum of squared errors
<i>89</i>&nbsp;     * @param containsConstant true model has constant,  false model does not have constant
<i>90</i>&nbsp;     * @param copyData if true a deep copy of all input data is made, if false only references
<i>91</i>&nbsp;     * are copied and the RegressionResults become mutable
<i>92</i>&nbsp;     */
<i>93</i>&nbsp;    public RegressionResults(
<i>94</i>&nbsp;            final double[] parameters, final double[][] varcov,
<i>95</i>&nbsp;            final boolean isSymmetricCompressed,
<i>96</i>&nbsp;            final long nobs, final int rank,
<i>97</i>&nbsp;            final double sumy, final double sumysq, final double sse,
<i>98</i>&nbsp;            final boolean containsConstant,
<b class="fc"><i>99</i>&nbsp;            final boolean copyData) {</b>
<b class="fc"><i>100</i>&nbsp;        if (copyData) {</b>
<b class="nc"><i>101</i>&nbsp;            this.parameters = MathArrays.copyOf(parameters);</b>
<b class="nc"><i>102</i>&nbsp;            this.varCovData = new double[varcov.length][];</b>
<b class="nc"><i>103</i>&nbsp;            for (int i = 0; i &lt; varcov.length; i++) {</b>
<b class="nc"><i>104</i>&nbsp;                this.varCovData[i] = MathArrays.copyOf(varcov[i]);</b>
<i>105</i>&nbsp;            }
<i>106</i>&nbsp;        } else {
<b class="fc"><i>107</i>&nbsp;            this.parameters = parameters;</b>
<b class="fc"><i>108</i>&nbsp;            this.varCovData = varcov;</b>
<i>109</i>&nbsp;        }
<b class="fc"><i>110</i>&nbsp;        this.isSymmetricVCD = isSymmetricCompressed;</b>
<b class="fc"><i>111</i>&nbsp;        this.nobs = nobs;</b>
<b class="fc"><i>112</i>&nbsp;        this.rank = rank;</b>
<b class="fc"><i>113</i>&nbsp;        this.containsConstant = containsConstant;</b>
<b class="fc"><i>114</i>&nbsp;        this.globalFitInfo = new double[5];</b>
<b class="fc"><i>115</i>&nbsp;        Arrays.fill(this.globalFitInfo, Double.NaN);</b>
<i>116</i>&nbsp;
<b class="fc"><i>117</i>&nbsp;        if (rank &gt; 0) {</b>
<b class="fc"><i>118</i>&nbsp;            this.globalFitInfo[SST_IDX] = containsConstant ?</b>
<i>119</i>&nbsp;                    (sumysq - sumy * sumy / nobs) : sumysq;
<i>120</i>&nbsp;        }
<i>121</i>&nbsp;
<b class="fc"><i>122</i>&nbsp;        this.globalFitInfo[SSE_IDX] = sse;</b>
<b class="fc"><i>123</i>&nbsp;        this.globalFitInfo[MSE_IDX] = this.globalFitInfo[SSE_IDX] /</b>
<i>124</i>&nbsp;                (nobs - rank);
<b class="fc"><i>125</i>&nbsp;        this.globalFitInfo[RSQ_IDX] = 1.0 -</b>
<i>126</i>&nbsp;                this.globalFitInfo[SSE_IDX] /
<i>127</i>&nbsp;                this.globalFitInfo[SST_IDX];
<i>128</i>&nbsp;
<b class="fc"><i>129</i>&nbsp;        if (!containsConstant) {</b>
<b class="fc"><i>130</i>&nbsp;            this.globalFitInfo[ADJRSQ_IDX] = 1.0-</b>
<i>131</i>&nbsp;                    (1.0 - this.globalFitInfo[RSQ_IDX]) *
<i>132</i>&nbsp;                    ( (double) nobs / ( (double) (nobs - rank)));
<i>133</i>&nbsp;        } else {
<b class="fc"><i>134</i>&nbsp;            this.globalFitInfo[ADJRSQ_IDX] = 1.0 - (sse * (nobs - 1.0)) /</b>
<i>135</i>&nbsp;                    (globalFitInfo[SST_IDX] * (nobs - rank));
<i>136</i>&nbsp;        }
<b class="fc"><i>137</i>&nbsp;    }</b>
<i>138</i>&nbsp;
<i>139</i>&nbsp;    /**
<i>140</i>&nbsp;     * &lt;p&gt;Returns the parameter estimate for the regressor at the given index.&lt;/p&gt;
<i>141</i>&nbsp;     *
<i>142</i>&nbsp;     * &lt;p&gt;A redundant regressor will have its redundancy flag set, as well as
<i>143</i>&nbsp;     *  a parameters estimated equal to {@code Double.NaN}&lt;/p&gt;
<i>144</i>&nbsp;     *
<i>145</i>&nbsp;     * @param index Index.
<i>146</i>&nbsp;     * @return the parameters estimated for regressor at index.
<i>147</i>&nbsp;     * @throws OutOfRangeException if {@code index} is not in the interval
<i>148</i>&nbsp;     * {@code [0, number of parameters)}.
<i>149</i>&nbsp;     */
<i>150</i>&nbsp;    public double getParameterEstimate(int index) throws OutOfRangeException {
<b class="fc"><i>151</i>&nbsp;        if (parameters == null) {</b>
<b class="nc"><i>152</i>&nbsp;            return Double.NaN;</b>
<i>153</i>&nbsp;        }
<b class="fc"><i>154</i>&nbsp;        if (index &lt; 0 || index &gt;= this.parameters.length) {</b>
<b class="nc"><i>155</i>&nbsp;            throw new OutOfRangeException(index, 0, this.parameters.length - 1);</b>
<i>156</i>&nbsp;        }
<b class="fc"><i>157</i>&nbsp;        return this.parameters[index];</b>
<i>158</i>&nbsp;    }
<i>159</i>&nbsp;
<i>160</i>&nbsp;    /**
<i>161</i>&nbsp;     * &lt;p&gt;Returns a copy of the regression parameters estimates.&lt;/p&gt;
<i>162</i>&nbsp;     *
<i>163</i>&nbsp;     * &lt;p&gt;The parameter estimates are returned in the natural order of the data.&lt;/p&gt;
<i>164</i>&nbsp;     *
<i>165</i>&nbsp;     * &lt;p&gt;A redundant regressor will have its redundancy flag set, as will
<i>166</i>&nbsp;     *  a parameter estimate equal to {@code Double.NaN}.&lt;/p&gt;
<i>167</i>&nbsp;     *
<i>168</i>&nbsp;     * @return array of parameter estimates, null if no estimation occurred
<i>169</i>&nbsp;     */
<i>170</i>&nbsp;    public double[] getParameterEstimates() {
<b class="fc"><i>171</i>&nbsp;        if (this.parameters == null) {</b>
<b class="nc"><i>172</i>&nbsp;            return null;</b>
<i>173</i>&nbsp;        }
<b class="fc"><i>174</i>&nbsp;        return MathArrays.copyOf(parameters);</b>
<i>175</i>&nbsp;    }
<i>176</i>&nbsp;
<i>177</i>&nbsp;    /**
<i>178</i>&nbsp;     * Returns the &lt;a href=&quot;http://www.xycoon.com/standerrorb(1).htm&quot;&gt;standard
<i>179</i>&nbsp;     * error of the parameter estimate at index&lt;/a&gt;,
<i>180</i>&nbsp;     * usually denoted s(b&lt;sub&gt;index&lt;/sub&gt;).
<i>181</i>&nbsp;     *
<i>182</i>&nbsp;     * @param index Index.
<i>183</i>&nbsp;     * @return the standard errors associated with parameters estimated at index.
<i>184</i>&nbsp;     * @throws OutOfRangeException if {@code index} is not in the interval
<i>185</i>&nbsp;     * {@code [0, number of parameters)}.
<i>186</i>&nbsp;     */
<i>187</i>&nbsp;    public double getStdErrorOfEstimate(int index) throws OutOfRangeException {
<b class="fc"><i>188</i>&nbsp;        if (parameters == null) {</b>
<b class="nc"><i>189</i>&nbsp;            return Double.NaN;</b>
<i>190</i>&nbsp;        }
<b class="fc"><i>191</i>&nbsp;        if (index &lt; 0 || index &gt;= this.parameters.length) {</b>
<b class="nc"><i>192</i>&nbsp;            throw new OutOfRangeException(index, 0, this.parameters.length - 1);</b>
<i>193</i>&nbsp;        }
<b class="fc"><i>194</i>&nbsp;        double var = this.getVcvElement(index, index);</b>
<b class="fc"><i>195</i>&nbsp;        if (!Double.isNaN(var) &amp;&amp; var &gt; Double.MIN_VALUE) {</b>
<b class="fc"><i>196</i>&nbsp;            return FastMath.sqrt(var);</b>
<i>197</i>&nbsp;        }
<b class="nc"><i>198</i>&nbsp;        return Double.NaN;</b>
<i>199</i>&nbsp;    }
<i>200</i>&nbsp;
<i>201</i>&nbsp;    /**
<i>202</i>&nbsp;     * &lt;p&gt;Returns the &lt;a href=&quot;http://www.xycoon.com/standerrorb(1).htm&quot;&gt;standard
<i>203</i>&nbsp;     * error of the parameter estimates&lt;/a&gt;,
<i>204</i>&nbsp;     * usually denoted s(b&lt;sub&gt;i&lt;/sub&gt;).&lt;/p&gt;
<i>205</i>&nbsp;     *
<i>206</i>&nbsp;     * &lt;p&gt;If there are problems with an ill conditioned design matrix then the regressor
<i>207</i>&nbsp;     * which is redundant will be assigned &lt;code&gt;Double.NaN&lt;/code&gt;. &lt;/p&gt;
<i>208</i>&nbsp;     *
<i>209</i>&nbsp;     * @return an array standard errors associated with parameters estimates,
<i>210</i>&nbsp;     *  null if no estimation occurred
<i>211</i>&nbsp;     */
<i>212</i>&nbsp;    public double[] getStdErrorOfEstimates() {
<b class="fc"><i>213</i>&nbsp;        if (parameters == null) {</b>
<b class="nc"><i>214</i>&nbsp;            return null;</b>
<i>215</i>&nbsp;        }
<b class="fc"><i>216</i>&nbsp;        double[] se = new double[this.parameters.length];</b>
<b class="fc"><i>217</i>&nbsp;        for (int i = 0; i &lt; this.parameters.length; i++) {</b>
<b class="fc"><i>218</i>&nbsp;            double var = this.getVcvElement(i, i);</b>
<b class="fc"><i>219</i>&nbsp;            if (!Double.isNaN(var) &amp;&amp; var &gt; Double.MIN_VALUE) {</b>
<b class="fc"><i>220</i>&nbsp;                se[i] = FastMath.sqrt(var);</b>
<b class="fc"><i>221</i>&nbsp;                continue;</b>
<i>222</i>&nbsp;            }
<b class="fc"><i>223</i>&nbsp;            se[i] = Double.NaN;</b>
<i>224</i>&nbsp;        }
<b class="fc"><i>225</i>&nbsp;        return se;</b>
<i>226</i>&nbsp;    }
<i>227</i>&nbsp;
<i>228</i>&nbsp;    /**
<i>229</i>&nbsp;     * &lt;p&gt;Returns the covariance between regression parameters i and j.&lt;/p&gt;
<i>230</i>&nbsp;     *
<i>231</i>&nbsp;     * &lt;p&gt;If there are problems with an ill conditioned design matrix then the covariance
<i>232</i>&nbsp;     * which involves redundant columns will be assigned {@code Double.NaN}. &lt;/p&gt;
<i>233</i>&nbsp;     *
<i>234</i>&nbsp;     * @param i {@code i}th regression parameter.
<i>235</i>&nbsp;     * @param j {@code j}th regression parameter.
<i>236</i>&nbsp;     * @return the covariance of the parameter estimates.
<i>237</i>&nbsp;     * @throws OutOfRangeException if {@code i} or {@code j} is not in the
<i>238</i>&nbsp;     * interval {@code [0, number of parameters)}.
<i>239</i>&nbsp;     */
<i>240</i>&nbsp;    public double getCovarianceOfParameters(int i, int j) throws OutOfRangeException {
<b class="fc"><i>241</i>&nbsp;        if (parameters == null) {</b>
<b class="nc"><i>242</i>&nbsp;            return Double.NaN;</b>
<i>243</i>&nbsp;        }
<b class="fc"><i>244</i>&nbsp;        if (i &lt; 0 || i &gt;= this.parameters.length) {</b>
<b class="nc"><i>245</i>&nbsp;            throw new OutOfRangeException(i, 0, this.parameters.length - 1);</b>
<i>246</i>&nbsp;        }
<b class="fc"><i>247</i>&nbsp;        if (j &lt; 0 || j &gt;= this.parameters.length) {</b>
<b class="nc"><i>248</i>&nbsp;            throw new OutOfRangeException(j, 0, this.parameters.length - 1);</b>
<i>249</i>&nbsp;        }
<b class="fc"><i>250</i>&nbsp;        return this.getVcvElement(i, j);</b>
<i>251</i>&nbsp;    }
<i>252</i>&nbsp;
<i>253</i>&nbsp;    /**
<i>254</i>&nbsp;     * &lt;p&gt;Returns the number of parameters estimated in the model.&lt;/p&gt;
<i>255</i>&nbsp;     *
<i>256</i>&nbsp;     * &lt;p&gt;This is the maximum number of regressors, some techniques may drop
<i>257</i>&nbsp;     * redundant parameters&lt;/p&gt;
<i>258</i>&nbsp;     *
<i>259</i>&nbsp;     * @return number of regressors, -1 if not estimated
<i>260</i>&nbsp;     */
<i>261</i>&nbsp;    public int getNumberOfParameters() {
<b class="nc"><i>262</i>&nbsp;        if (this.parameters == null) {</b>
<b class="nc"><i>263</i>&nbsp;            return -1;</b>
<i>264</i>&nbsp;        }
<b class="nc"><i>265</i>&nbsp;        return this.parameters.length;</b>
<i>266</i>&nbsp;    }
<i>267</i>&nbsp;
<i>268</i>&nbsp;    /**
<i>269</i>&nbsp;     * Returns the number of observations added to the regression model.
<i>270</i>&nbsp;     *
<i>271</i>&nbsp;     * @return Number of observations, -1 if an error condition prevents estimation
<i>272</i>&nbsp;     */
<i>273</i>&nbsp;    public long getN() {
<b class="fc"><i>274</i>&nbsp;        return this.nobs;</b>
<i>275</i>&nbsp;    }
<i>276</i>&nbsp;
<i>277</i>&nbsp;    /**
<i>278</i>&nbsp;     * &lt;p&gt;Returns the sum of squared deviations of the y values about their mean.&lt;/p&gt;
<i>279</i>&nbsp;     *
<i>280</i>&nbsp;     * &lt;p&gt;This is defined as SSTO
<i>281</i>&nbsp;     * &lt;a href=&quot;http://www.xycoon.com/SumOfSquares.htm&quot;&gt;here&lt;/a&gt;.&lt;/p&gt;
<i>282</i>&nbsp;     *
<i>283</i>&nbsp;     * &lt;p&gt;If {@code n &lt; 2}, this returns {@code Double.NaN}.&lt;/p&gt;
<i>284</i>&nbsp;     *
<i>285</i>&nbsp;     * @return sum of squared deviations of y values
<i>286</i>&nbsp;     */
<i>287</i>&nbsp;    public double getTotalSumSquares() {
<b class="nc"><i>288</i>&nbsp;        return this.globalFitInfo[SST_IDX];</b>
<i>289</i>&nbsp;    }
<i>290</i>&nbsp;
<i>291</i>&nbsp;    /**
<i>292</i>&nbsp;     * &lt;p&gt;Returns the sum of squared deviations of the predicted y values about
<i>293</i>&nbsp;     * their mean (which equals the mean of y).&lt;/p&gt;
<i>294</i>&nbsp;     *
<i>295</i>&nbsp;     * &lt;p&gt;This is usually abbreviated SSR or SSM.  It is defined as SSM
<i>296</i>&nbsp;     * &lt;a href=&quot;http://www.xycoon.com/SumOfSquares.htm&quot;&gt;here&lt;/a&gt;&lt;/p&gt;
<i>297</i>&nbsp;     *
<i>298</i>&nbsp;     * &lt;p&gt;&lt;strong&gt;Preconditions&lt;/strong&gt;: &lt;ul&gt;
<i>299</i>&nbsp;     * &lt;li&gt;At least two observations (with at least two different x values)
<i>300</i>&nbsp;     * must have been added before invoking this method. If this method is
<i>301</i>&nbsp;     * invoked before a model can be estimated, &lt;code&gt;Double.NaN&lt;/code&gt; is
<i>302</i>&nbsp;     * returned.
<i>303</i>&nbsp;     * &lt;/li&gt;&lt;/ul&gt;
<i>304</i>&nbsp;     *
<i>305</i>&nbsp;     * @return sum of squared deviations of predicted y values
<i>306</i>&nbsp;     */
<i>307</i>&nbsp;    public double getRegressionSumSquares() {
<b class="fc"><i>308</i>&nbsp;        return this.globalFitInfo[SST_IDX] - this.globalFitInfo[SSE_IDX];</b>
<i>309</i>&nbsp;    }
<i>310</i>&nbsp;
<i>311</i>&nbsp;    /**
<i>312</i>&nbsp;     * &lt;p&gt;Returns the &lt;a href=&quot;http://www.xycoon.com/SumOfSquares.htm&quot;&gt;
<i>313</i>&nbsp;     * sum of squared errors&lt;/a&gt; (SSE) associated with the regression
<i>314</i>&nbsp;     * model.&lt;/p&gt;
<i>315</i>&nbsp;     *
<i>316</i>&nbsp;     * &lt;p&gt;The return value is constrained to be non-negative - i.e., if due to
<i>317</i>&nbsp;     * rounding errors the computational formula returns a negative result,
<i>318</i>&nbsp;     * 0 is returned.&lt;/p&gt;
<i>319</i>&nbsp;     *
<i>320</i>&nbsp;     * &lt;p&gt;&lt;strong&gt;Preconditions&lt;/strong&gt;: &lt;ul&gt;
<i>321</i>&nbsp;     * &lt;li&gt;numberOfParameters data pairs
<i>322</i>&nbsp;     * must have been added before invoking this method. If this method is
<i>323</i>&nbsp;     * invoked before a model can be estimated, &lt;code&gt;Double,NaN&lt;/code&gt; is
<i>324</i>&nbsp;     * returned.
<i>325</i>&nbsp;     * &lt;/li&gt;&lt;/ul&gt;
<i>326</i>&nbsp;     *
<i>327</i>&nbsp;     * @return sum of squared errors associated with the regression model
<i>328</i>&nbsp;     */
<i>329</i>&nbsp;    public double getErrorSumSquares() {
<b class="fc"><i>330</i>&nbsp;        return this.globalFitInfo[ SSE_IDX];</b>
<i>331</i>&nbsp;    }
<i>332</i>&nbsp;
<i>333</i>&nbsp;    /**
<i>334</i>&nbsp;     * &lt;p&gt;Returns the sum of squared errors divided by the degrees of freedom,
<i>335</i>&nbsp;     * usually abbreviated MSE.&lt;/p&gt;
<i>336</i>&nbsp;     *
<i>337</i>&nbsp;     * &lt;p&gt;If there are fewer than &lt;strong&gt;numberOfParameters + 1&lt;/strong&gt; data pairs in the model,
<i>338</i>&nbsp;     * or if there is no variation in &lt;code&gt;x&lt;/code&gt;, this returns
<i>339</i>&nbsp;     * &lt;code&gt;Double.NaN&lt;/code&gt;.&lt;/p&gt;
<i>340</i>&nbsp;     *
<i>341</i>&nbsp;     * @return sum of squared deviations of y values
<i>342</i>&nbsp;     */
<i>343</i>&nbsp;    public double getMeanSquareError() {
<b class="fc"><i>344</i>&nbsp;        return this.globalFitInfo[ MSE_IDX];</b>
<i>345</i>&nbsp;    }
<i>346</i>&nbsp;
<i>347</i>&nbsp;    /**
<i>348</i>&nbsp;     * &lt;p&gt;Returns the &lt;a href=&quot;http://www.xycoon.com/coefficient1.htm&quot;&gt;
<i>349</i>&nbsp;     * coefficient of multiple determination&lt;/a&gt;,
<i>350</i>&nbsp;     * usually denoted r-square.&lt;/p&gt;
<i>351</i>&nbsp;     *
<i>352</i>&nbsp;     * &lt;p&gt;&lt;strong&gt;Preconditions&lt;/strong&gt;: &lt;ul&gt;
<i>353</i>&nbsp;     * &lt;li&gt;At least numberOfParameters observations (with at least numberOfParameters different x values)
<i>354</i>&nbsp;     * must have been added before invoking this method. If this method is
<i>355</i>&nbsp;     * invoked before a model can be estimated, {@code Double,NaN} is
<i>356</i>&nbsp;     * returned.
<i>357</i>&nbsp;     * &lt;/li&gt;&lt;/ul&gt;
<i>358</i>&nbsp;     *
<i>359</i>&nbsp;     * @return r-square, a double in the interval [0, 1]
<i>360</i>&nbsp;     */
<i>361</i>&nbsp;    public double getRSquared() {
<b class="fc"><i>362</i>&nbsp;        return this.globalFitInfo[ RSQ_IDX];</b>
<i>363</i>&nbsp;    }
<i>364</i>&nbsp;
<i>365</i>&nbsp;    /**
<i>366</i>&nbsp;     * &lt;p&gt;Returns the adjusted R-squared statistic, defined by the formula &lt;div style=&quot;white-space: pre&quot;&gt;&lt;code&gt;
<i>367</i>&nbsp;     * R&lt;sup&gt;2&lt;/sup&gt;&lt;sub&gt;adj&lt;/sub&gt; = 1 - [SSR (n - 1)] / [SSTO (n - p)]
<i>368</i>&nbsp;     * &lt;/code&gt;&lt;/div&gt;
<i>369</i>&nbsp;     * where SSR is the sum of squared residuals},
<i>370</i>&nbsp;     * SSTO is the total sum of squares}, n is the number
<i>371</i>&nbsp;     * of observations and p is the number of parameters estimated (including the intercept).
<i>372</i>&nbsp;     *
<i>373</i>&nbsp;     * &lt;p&gt;If the regression is estimated without an intercept term, what is returned is &lt;pre&gt;
<i>374</i>&nbsp;     * &lt;code&gt; 1 - (1 - {@link #getRSquared()} ) * (n / (n - p)) &lt;/code&gt;
<i>375</i>&nbsp;     * &lt;/pre&gt;
<i>376</i>&nbsp;     *
<i>377</i>&nbsp;     * @return adjusted R-Squared statistic
<i>378</i>&nbsp;     */
<i>379</i>&nbsp;    public double getAdjustedRSquared() {
<b class="fc"><i>380</i>&nbsp;        return this.globalFitInfo[ ADJRSQ_IDX];</b>
<i>381</i>&nbsp;    }
<i>382</i>&nbsp;
<i>383</i>&nbsp;    /**
<i>384</i>&nbsp;     * Returns true if the regression model has been computed including an intercept.
<i>385</i>&nbsp;     * In this case, the coefficient of the intercept is the first element of the
<i>386</i>&nbsp;     * {@link #getParameterEstimates() parameter estimates}.
<i>387</i>&nbsp;     * @return true if the model has an intercept term
<i>388</i>&nbsp;     */
<i>389</i>&nbsp;    public boolean hasIntercept() {
<b class="nc"><i>390</i>&nbsp;        return this.containsConstant;</b>
<i>391</i>&nbsp;    }
<i>392</i>&nbsp;
<i>393</i>&nbsp;    /**
<i>394</i>&nbsp;     * Gets the i-jth element of the variance-covariance matrix.
<i>395</i>&nbsp;     *
<i>396</i>&nbsp;     * @param i first variable index
<i>397</i>&nbsp;     * @param j second variable index
<i>398</i>&nbsp;     * @return the requested variance-covariance matrix entry
<i>399</i>&nbsp;     */
<i>400</i>&nbsp;    private double getVcvElement(int i, int j) {
<b class="fc"><i>401</i>&nbsp;        if (this.isSymmetricVCD) {</b>
<b class="fc"><i>402</i>&nbsp;            if (this.varCovData.length &gt; 1) {</b>
<i>403</i>&nbsp;                //could be stored in upper or lower triangular
<b class="nc"><i>404</i>&nbsp;                if (i == j) {</b>
<b class="nc"><i>405</i>&nbsp;                    return varCovData[i][i];</b>
<b class="nc"><i>406</i>&nbsp;                } else if (i &gt;= varCovData[j].length) {</b>
<b class="nc"><i>407</i>&nbsp;                    return varCovData[i][j];</b>
<i>408</i>&nbsp;                } else {
<b class="nc"><i>409</i>&nbsp;                    return varCovData[j][i];</b>
<i>410</i>&nbsp;                }
<i>411</i>&nbsp;            } else {//could be in single array
<b class="fc"><i>412</i>&nbsp;                if (i &gt; j) {</b>
<b class="fc"><i>413</i>&nbsp;                    return varCovData[0][(i + 1) * i / 2 + j];</b>
<i>414</i>&nbsp;                } else {
<b class="fc"><i>415</i>&nbsp;                    return varCovData[0][(j + 1) * j / 2 + i];</b>
<i>416</i>&nbsp;                }
<i>417</i>&nbsp;            }
<i>418</i>&nbsp;        } else {
<b class="nc"><i>419</i>&nbsp;            return this.varCovData[i][j];</b>
<i>420</i>&nbsp;        }
<i>421</i>&nbsp;    }
<i>422</i>&nbsp;}
</div>
</div>

<div class="footer">
    
    <div style="float:right;">generated on 2019-06-04 09:26</div>
</div>
</body>
</html>
